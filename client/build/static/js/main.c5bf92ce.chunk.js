(this["webpackJsonpchatting-app"]=this["webpackJsonpchatting-app"]||[]).push([[0],{134:function(e,t,a){},158:function(e,t,a){},166:function(e,t,a){},197:function(e,t,a){},199:function(e,t,a){},200:function(e,t,a){},201:function(e,t,a){},205:function(e,t,a){"use strict";a.r(t);a(78);var s=a(0),n=a.n(s),c=a(12),r=a.n(c),i=(a(134),a(13)),o=a(14),l=a(16),d=a(15),u=a(24),j=a(21),h=a(55),p=a(22),m=a.n(p),b=function(e){e?m.a.defaults.headers.common.Authorization=e:delete m.a.defaults.headers.common.Authorization},O="GET_ERRORS",f="CLEAN_ERRORS",g="USER_LOADING",x="SET_CURRENT_USER",v="PASSWORD_CHANGED",N="UPDATE_CONTACTS",C="CLEAN_CONTACTS",w="USER_LOADING",y="GET_USERS",k="CLEAN_USERS",S="CREATE_NEW_CONVERSATION",_="UPDATE_CONVERSATIONS",M="UPDATE_FRIEND_CURRENT_CONVERSATION",P="SET_CURRENT_CONVERSATION",E="CLEAN_CONVERSATIONS",A="GET_MESSAGES",U="AFTER_POST_MESSAGE",I="CLEAN_MESSAGES",F="http://localhost:5000",T=function(e){return function(t){t(D(!0)),m.a.get(F+"/api/users/get-contacts?id="+e).then((function(e){return e.data.contacts_list})).then((function(e){return t(R(e))})).catch((function(e){return t({type:O,payload:e.response.data})}))}},R=function(e){return{type:N,payload:e}},D=function(){return{type:w}},L=function(e){return function(t){m.a.get(F+"/api/users/get-users?list="+e).then((function(e){t(G(e.data.users_list))})).catch((function(e){return t({type:O,payload:e.response.data})}))}},G=function(e){return{type:y,payload:e}},V=function(e){return function(t){t({type:S,payload:e})}},z=function(e){return function(t){m.a.get(F+"/api/conversations/get-conversations?userId="+e).then((function(e){return e.data})).then((function(e){return t(B(e))})).catch((function(e){return t({type:O,payload:e.response.data})}))}},B=function(e){return{type:_,payload:e}},K=function(e){return function(t){m.a.get(F+"/api/messages/get-messages-conversation?conversationId="+e).then((function(e){return e.data})).then((function(e){return t(W(e))})).catch((function(e){return t({type:O,payload:e.response.data})}))}},W=function(e){return{type:A,payload:e}},H=function(e){return{type:x,payload:e}},J=function(){return function(e){localStorage.removeItem("jwtToken"),b(!1),e(H({})),e({type:C}),e({type:k}),e({type:E}),e({type:I})}},Y=function(){return{type:f}},q=a(44),X=a(231),Q=a(232),Z=a(233),$=a(234),ee=a(235),te=a(236),ae=a(20),se=a(41),ne=a.n(se),ce=a(2);var re=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(q.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={nickname:e.state.nickname,email:e.state.email,password:e.state.password,password2:e.state.password2};e.props.registerUser(a,e.props.history)},e.state={nickname:"",email:"",password:"",password2:"",errors:{}},e}return Object(o.a)(a,[{key:"componentWillReceiveProps",value:function(e){if(e.errors){this.setState({errors:e.errors});var t=(a=e.errors).nickname?a.nickname:a.email?a.email:a.password?a.password:a.password2?a.password2:void 0;ne()("Error!",t,"error")}var a}},{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/temp")}},{key:"render",value:function(){var e=this.state.errors;return Object(ce.jsx)(n.a.Fragment,{children:Object(ce.jsx)("div",{className:"container-login100",children:Object(ce.jsxs)("div",{className:"wrap-login101",children:[Object(ce.jsx)("span",{className:"login100-form-title",children:"Standar Form"}),Object(ce.jsxs)(X.a,{className:"login100-form",noValidate:!0,onSubmit:this.onSubmit,children:[Object(ce.jsxs)(Q.a,{className:"form-group",children:[Object(ce.jsx)(Z.a,{htmlFor:"firstname",md:12,children:"Nickname"}),Object(ce.jsxs)($.a,{md:12,className:"wrap-input100",children:[Object(ce.jsx)(ee.a,{id:"nickname",onChange:this.onChange,value:this.state.nickname,placeholder:"Nickname",className:"input100",error:e.nickname}),Object(ce.jsx)("span",{className:"focus-input100"}),Object(ce.jsx)("span",{className:"symbol-input100",children:Object(ce.jsx)("i",{className:"fa fa-id-card"})})]})]}),Object(ce.jsxs)(Q.a,{className:"form-group",children:[Object(ce.jsx)(Z.a,{htmlFor:"firstname",md:12,children:"Email"}),Object(ce.jsxs)($.a,{md:12,className:"wrap-input100",children:[Object(ce.jsx)(ee.a,{id:"email",placeholder:"Email",className:"input100",onChange:this.onChange,value:this.state.email,error:e.email}),Object(ce.jsx)("span",{className:"focus-input100"}),Object(ce.jsx)("span",{className:"symbol-input100",children:Object(ce.jsx)("i",{className:"fa fa-envelope"})})]})]}),Object(ce.jsxs)(Q.a,{className:"form-group",children:[Object(ce.jsx)(Z.a,{htmlFor:"firstname",md:12,children:"Password"}),Object(ce.jsxs)($.a,{md:12,className:"wrap-input100",children:[Object(ce.jsx)(ee.a,{type:"password",id:"password",placeholder:"Password",className:"input100",onChange:this.onChange,value:this.state.password,error:e.password}),Object(ce.jsx)("span",{className:"focus-input100"}),Object(ce.jsx)("span",{className:"symbol-input100",children:Object(ce.jsx)("i",{className:"fa fa-lock"})})]})]}),Object(ce.jsxs)(Q.a,{className:"form-group",children:[Object(ce.jsx)(Z.a,{htmlFor:"firstname",md:12,children:"Confirm Password"}),Object(ce.jsxs)($.a,{md:12,className:"wrap-input100",children:[Object(ce.jsx)(ee.a,{type:"password",id:"password2",placeholder:"Confirm Password",className:"input100",onChange:this.onChange,value:this.state.password2,error:e.password2}),Object(ce.jsx)("span",{className:"focus-input100"}),Object(ce.jsx)("span",{className:"symbol-input100",children:Object(ce.jsx)("i",{className:"fa fa-lock"})})]})]}),Object(ce.jsx)(Q.a,{className:"form-group",children:Object(ce.jsx)($.a,{md:{size:10},className:"container-login100-form-btn",children:Object(ce.jsx)(te.a,{type:"submit",className:"login100-form-btn",children:"Sign Up"})})})]})]})})})}}]),a}(s.Component),ie=Object(ae.b)((function(e){return{auth:e.auth,errors:e.errors}}),{registerUser:function(e,t){return function(a){m.a.post(F+"/api/users/register/",e).then((function(e){return t.push("/sign-in")})).catch((function(e){return a({type:O,payload:e.response.data})}))}}})(Object(j.g)(re)),oe=a(237);var le=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(q.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};e.props.loginUser(a)},e.state={email:"",password:"",errors:{}},e}return Object(o.a)(a,[{key:"componentWillReceiveProps",value:function(e){if(e.auth.isAuthenticated)this.props.cleanErrors(),this.props.history.push("/app");else if(e.errors){this.setState({errors:e.errors});var t=(a=e.errors).email?a.email:a.password?a.password:a.passwordincorrect?a.passwordincorrect:a.emailnotfound?a.emailnotfound:void 0;ne()("Error!",t,"error")}var a}},{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/app")}},{key:"render",value:function(){var e=this.state.errors;return Object(ce.jsx)(n.a.Fragment,{children:Object(ce.jsx)("div",{className:"container-login100",children:Object(ce.jsxs)("div",{className:"wrap-login100",children:[Object(ce.jsx)("div",{className:"login100-pic js-tilt","data-tilt":!0,children:Object(ce.jsx)("img",{src:"images/login.png",alt:"IMG"})}),Object(ce.jsxs)(X.a,{className:"login100-form",noValidate:!0,onSubmit:this.onSubmit,children:[Object(ce.jsx)(Q.a,{className:"form-group",children:Object(ce.jsx)($.a,{md:12,className:"wrap-input100",children:Object(ce.jsxs)(oe.a,{children:[Object(ce.jsx)(ee.a,{id:"email",placeholder:"Email",className:"input100",onChange:this.onChange,value:this.state.email,error:e.email}),Object(ce.jsx)("span",{className:"focus-input100"}),Object(ce.jsx)("span",{className:"symbol-input100",children:Object(ce.jsx)("i",{className:"fa fa-envelope"})})]})})}),Object(ce.jsx)(Q.a,{className:"form-group",children:Object(ce.jsxs)($.a,{md:12,className:"wrap-input100",children:[Object(ce.jsx)(ee.a,{type:"password",id:"password",placeholder:"Password",className:"input100",onChange:this.onChange,value:this.state.password,error:e.password}),Object(ce.jsx)("span",{className:"focus-input100"}),Object(ce.jsx)("span",{className:"symbol-input100",children:Object(ce.jsx)("i",{className:"fa fa-lock"})})]})}),Object(ce.jsx)(Q.a,{className:"form-group",children:Object(ce.jsx)($.a,{md:{size:10},className:"container-login100-form-btn",children:Object(ce.jsx)(te.a,{type:"submit",className:"login100-form-btn",children:"Sign In"})})}),Object(ce.jsx)("div",{className:"text-center pt-5",children:Object(ce.jsxs)(u.b,{className:"txt2",to:"/sign-up",children:["Sign up",Object(ce.jsx)("i",{className:"fa fa-long-arrow-right m-l-5","aria-hidden":"true"})]})})]})]})})})}}]),a}(s.Component),de=Object(ae.b)((function(e){return{auth:e.auth,errors:e.errors}}),{loginUser:function(e){return function(t){m.a.post(F+"/api/users/login",e).then((function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),b(a);var s=Object(h.a)(a);t(H(s))})).catch((function(e){return t({type:O,payload:e.response.data})}))}},cleanErrors:Y,getContacts:T})(Object(j.g)(le)),ue=a(18),je=a(112),he=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(ce.jsx)("div",{className:"chat__item ".concat(this.props.user?"":"other"),children:Object(ce.jsxs)("div",{className:"chat__item__content ".concat(this.props.user?"":"other"),children:[Object(ce.jsx)("div",{className:"chat__msg",children:this.props.msg}),Object(ce.jsx)("div",{className:"chat__meta",children:Object(ce.jsx)("span",{children:Object(je.a)(this.props.time)})})]})})}}]),a}(s.Component),pe=a(243),me=a(238),be=a(239),Oe=a(240);a(158);function fe(e){return e.renderNewChatButton?Object(ce.jsx)("div",{className:"button-new-chat",id:"newChat",children:Object(ce.jsx)("button",{children:"New chat"})}):""}var ge=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(ce.jsxs)(n.a.Fragment,{children:[Object(ce.jsx)("div",{className:"row",children:Object(ce.jsxs)("div",{className:"col img-title",children:[Object(ce.jsx)("img",{src:""!==this.props.user.image?this.props.user.image:"images/profile_dummy.png",alt:"user",className:"img-fluid mt-5"}),Object(ce.jsx)("hr",{})]})}),Object(ce.jsxs)("div",{className:"row",children:[Object(ce.jsx)("div",{className:"col",children:Object(ce.jsxs)("div",{className:"info",children:[Object(ce.jsx)("div",{className:"card-body",children:Object(ce.jsxs)("div",{className:"info_data row",children:[Object(ce.jsx)("div",{className:"data col-md-3",children:Object(ce.jsx)("h6",{children:"Full Name"})}),Object(ce.jsx)("div",{className:"data col-md-9 text-seconday",children:Object(ce.jsx)("p",{children:this.props.user.name})})]})}),Object(ce.jsx)("hr",{}),Object(ce.jsx)("div",{className:"card-body",children:Object(ce.jsxs)("div",{className:"info_data row",children:[Object(ce.jsx)("div",{className:"data col-md-3",children:Object(ce.jsx)("h6",{children:"Nickname"})}),Object(ce.jsx)("div",{className:"data col-md-9 text-seconday",children:Object(ce.jsx)("p",{children:this.props.user.nickname})})]})}),Object(ce.jsx)("hr",{}),Object(ce.jsx)("div",{className:"card-body",children:Object(ce.jsxs)("div",{className:"info_data row",children:[Object(ce.jsx)("div",{className:"data col-md-3",children:Object(ce.jsx)("h6",{children:"Phone"})}),Object(ce.jsx)("div",{className:"data col-md-9 text-seconday",children:Object(ce.jsx)("p",{children:this.props.user.phone})})]})}),Object(ce.jsx)("hr",{}),Object(ce.jsx)("div",{className:"card-body",children:Object(ce.jsxs)("div",{className:"info_data row",children:[Object(ce.jsx)("div",{className:"data col-md-3",children:Object(ce.jsx)("h6",{children:"Email"})}),Object(ce.jsx)("div",{className:"data col-md-9 text-seconday",children:Object(ce.jsx)("p",{children:this.props.user.email})})]})}),Object(ce.jsx)("hr",{})]})}),Object(ce.jsxs)("div",{className:"social_media",children:[Object(ce.jsx)("a",{href:this.props.user.github,target:"_blank",rel:"noreferrer",className:"ml-2",children:Object(ce.jsxs)("span",{className:"fa-stack fa-lg",children:[Object(ce.jsx)("i",{className:"fa fa-circle fa-button fa-stack-2x"}),Object(ce.jsx)("i",{className:"fa fa-github fa-stack-1x fa-inverse"})]})}),Object(ce.jsx)("a",{href:this.props.user.instagram,target:"_blank",rel:"noreferrer",className:"ml-1 ",children:Object(ce.jsxs)("span",{className:"fa-stack fa-lg",children:[Object(ce.jsx)("i",{className:"fa fa-circle fa-button fa-stack-2x"}),Object(ce.jsx)("i",{className:"fa fa-instagram fa-stack-1x fa-inverse"})]})}),Object(ce.jsx)("a",{href:this.props.user.twitter,target:"_blank",rel:"noreferrer",className:"ml-1",children:Object(ce.jsxs)("span",{className:"fa-stack fa-lg",children:[Object(ce.jsx)("i",{className:"fa fa-circle fa-button fa-stack-2x"}),Object(ce.jsx)("i",{className:"fa fa-twitter fa-stack-1x fa-inverse"})]})}),Object(ce.jsx)("a",{href:this.props.user.linkedin,target:"_blank",rel:"noreferrer",className:"ml-1",children:Object(ce.jsxs)("span",{className:"fa-stack fa-lg",children:[Object(ce.jsx)("i",{className:"fa fa-circle fa-button fa-stack-2x"}),Object(ce.jsx)("i",{className:"fa fa-linkedin fa-stack-1x fa-inverse"})]})})]}),Object(ce.jsx)(fe,{renderNewChatButton:this.props.renderNewChatButton})]})]})}}]),a}(s.Component);var xe=function(e){return null!==e.user?Object(ce.jsxs)(pe.a,{isOpen:e.isModalOpen,toggle:e.toggleModal,size:"lg",children:[Object(ce.jsxs)(me.a,{children:[e.user.nickname," Profile"]}),Object(ce.jsx)(be.a,{children:Object(ce.jsx)("div",{className:"container scroll-modal",children:Object(ce.jsx)("div",{className:"row text-center",children:Object(ce.jsx)(ge,{user:e.user})})})}),Object(ce.jsx)(Oe.a,{children:Object(ce.jsx)(te.a,{color:"secondary",onClick:e.toggleModal,children:"Cancel"})})]}):""},ve=(a(166),a(107)),Ne=Object(ve.io)("http://localhost:5000");function Ce(e){var t=e.handleSearchChange,a=e.submitChatMessage,s=e.messageValue,n=e.currentConversationID,c=e.friendCurrentConversation,r=e.currentUser,i=e.messages,o=e.handleKeyPress,l=e.showContactProfile;return null!==n&&null!==c?Object(ce.jsxs)("div",{className:"main__chatcontent",children:[Object(ce.jsx)("div",{className:"content__header",children:Object(ce.jsxs)("div",{className:"current-chatting-user",children:[Object(ce.jsx)("img",{src:""!==c.image?c.image:"images/profile_dummy.png",className:"miniature-profile-image",alt:"profile img",onClick:l}),Object(ce.jsx)("p",{children:c.nickname})]})}),Object(ce.jsx)("div",{className:"content__body mt-3",children:Object(ce.jsx)("div",{className:"chat__items",children:0===Object.keys(i).length?"Send a message":i.messages.map((function(e){return Object(ce.jsx)(he,{user:e.sender===r?"me":"",msg:e.text,time:e.createdAt},e._id)}))})}),Object(ce.jsx)("div",{className:"content__footer",children:Object(ce.jsxs)("div",{className:"sendNewMessage",children:[Object(ce.jsx)("input",{type:"text",placeholder:"Type a message here",id:"input-conversation",value:s,onChange:t,onKeyPress:o,className:"border",autoComplete:"off"}),Object(ce.jsx)("button",{className:"btnSendMsg",id:"sendMsgBtn",onClick:a,children:Object(ce.jsx)("i",{className:"fa fa-paper-plane"})})]})})]}):Object(ce.jsxs)("div",{className:"contenedor",children:[Object(ce.jsx)("span",{className:"message-no-open-chat",children:"Open a conversation to start a chat"}),Object(ce.jsx)("img",{src:"images/withOutChat.png",className:"image_witout",alt:""})]})}var we=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleSearchChange=function(e){s.setState({messageValue:e.target.value})},s.submitChatMessage=function(){var e=s.state.messageValue,t=s.props.auth.user.id,a=s.props.conversations.currentConversation;""!==e&&(Ne.emit("Input Chat Message",{conversationId:a,text:e,sender:t}),s.setState({messageValue:""}))},s.state={messageValue:"",messages:[],contact:null,isContactProfileModalOpen:!1},s.handleSearchChange=s.handleSearchChange.bind(Object(ue.a)(s)),s.submitChatMessage=s.submitChatMessage.bind(Object(ue.a)(s)),s.handleKeyPress=s.handleKeyPress.bind(Object(ue.a)(s)),s.toggleContactProfileModal=s.toggleContactProfileModal.bind(Object(ue.a)(s)),s}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.getMessagesConversation(this.props.conversations.currentConversation),0===Ne.listeners("Output Chat Message").length&&Ne.on("Output Chat Message",(function(t){e.props.getMessage(t)}))}},{key:"toggleContactProfileModal",value:function(){this.setState({isContactProfileModalOpen:!this.state.isContactProfileModalOpen})}},{key:"componentWillReceiveProps",value:function(e){this.props.conversations.currentConversation!==e.conversations.currentConversation&&this.props.getMessagesConversation(e.conversations.currentConversation)}},{key:"handleKeyPress",value:function(e){13===e.charCode&&this.submitChatMessage()}},{key:"render",value:function(){return Object(ce.jsxs)(n.a.Fragment,{children:[Object(ce.jsx)(xe,{isModalOpen:this.state.isContactProfileModalOpen,toggleModal:this.toggleContactProfileModal,user:this.props.conversations.currentConversationFriend}),Object(ce.jsx)(Ce,{currentConversationID:this.props.conversations.currentConversation,friendCurrentConversation:this.props.conversations.currentConversationFriend,currentUser:this.props.auth.user.id,messageValue:this.state.messageValue,handleSearchChange:this.handleSearchChange,submitChatMessage:this.submitChatMessage,messages:this.props.messages,handleKeyPress:this.handleKeyPress,showContactProfile:this.toggleContactProfileModal})]})}}]),a}(s.Component),ye=Object(ae.b)((function(e){return{auth:e.auth,errors:e.errors,contacts:e.contacts,messages:e.messages,conversations:e.conversations}}),{getMessagesConversation:K,getMessage:function(e){return{type:U,payload:e}},getConversations:z})(Object(j.g)(we));function ke(e){var t,a=e.users.sort((t="nickname",function(e,a){return e[t].toLowerCase()>a[t].toLowerCase()?1:e[t].toLowerCase()<a[t].toLowerCase()?-1:0})).map((function(t){return Object(ce.jsx)("li",{className:"list-group-item",onClick:function(){return e.changeProfile(t)},children:Object(ce.jsxs)("div",{className:"row",children:[Object(ce.jsx)("div",{className:"col-2",children:Object(ce.jsx)("img",{src:""!==t.image?t.image:"images/profile_dummy.png",className:"img-fluid chat-list-miniature",id:"fotoGrupo",alt:"logo"})}),Object(ce.jsx)("div",{className:"col-10",children:t.nickname})]})},t.id)}));return Object(ce.jsx)("div",{className:"d-flex scroll-users-list border",children:Object(ce.jsx)("ul",{className:"list-group border",children:a})})}function Se(e){var t=e.profile;return null==t?Object(ce.jsx)("img",{src:"images/iconoFoto.png",className:"img-fluid",id:"fotoGrupo",alt:"logo"}):Object(ce.jsx)(ge,{user:t,renderNewChatButton:!1})}var _e=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={profile:null},s.changeProfile=s.changeProfile.bind(Object(ue.a)(s)),s.addNewContact=s.addNewContact.bind(Object(ue.a)(s)),s}return Object(o.a)(a,[{key:"changeProfile",value:function(e){this.setState({profile:e})}},{key:"addNewContact",value:function(){if(null==this.state.profile)ne()("Error!","You have to select an user!","error");else{var e={id_user:this.props.auth.user.id,id_contact:this.state.profile.id,contacts_list:this.props.contacts.contacts};this.props.addContact(e),this.setState({profile:null})}this.props.toggleModal()}},{key:"render",value:function(){return Object(ce.jsxs)(pe.a,{isOpen:this.props.isModalOpen,toggle:this.props.toggleModal,size:"lg",children:[Object(ce.jsx)(me.a,{modalClassName:"modal-header",children:"New Contact"}),Object(ce.jsx)(be.a,{children:Object(ce.jsx)("div",{className:"container scroll-modal",children:Object(ce.jsxs)("div",{className:"row",children:[Object(ce.jsx)("div",{className:"col-5 mt-5",children:Object(ce.jsx)(ke,{users:this.props.users,changeProfile:this.changeProfile})}),Object(ce.jsx)("div",{className:"col-7 text-center",children:Object(ce.jsx)(Se,{profile:this.state.profile})})]})})}),Object(ce.jsxs)(Oe.a,{children:[Object(ce.jsx)(te.a,{color:"primary",onClick:this.addNewContact,children:"Add Contact"}),Object(ce.jsx)(te.a,{color:"secondary",onClick:this.props.toggleModal,children:"Cancel"})]})]})}}]),a}(s.Component),Me=Object(ae.b)((function(e){return{auth:e.auth,errors:e.errors,contacts:e.contacts,users:e.users}}),{getUsers:L,addContact:function(e){return function(t){m.a.patch(F+"/api/users/add-contact",e).then((function(e){t(R(e.data.contacts_list))}))}}})(Object(j.g)(_e));function Pe(e){if(e.contacts.isLoading)return Object(ce.jsx)("div",{className:"col-12",children:Object(ce.jsx)("img",{src:"images/ghost.gif",alt:"searching...",className:"img-fluid rounded mx-auto d-block mt-5"})});if(0===e.contacts.contacts.length)return Object(ce.jsxs)("div",{class:"col-12 text-center",children:[Object(ce.jsx)("p",{children:"Add friends to star chatting!"}),Object(ce.jsx)("img",{src:"images/add-friend.png",className:"img-fluid no-chat-image",id:"fotoGrupo",alt:"logo"})]});var t,a=e.contacts.contacts.sort((t="nickname",function(e,a){return e[t]>a[t]?1:e[t]<a[t]?-1:0})).map((function(t){return Object(ce.jsx)("li",{className:"list-group-item",id:t.id,children:Object(ce.jsxs)("div",{className:"row",children:[Object(ce.jsx)("div",{className:"col-2",children:Object(ce.jsx)("img",{src:""!=t.image?t.image:"images/profile_dummy.png",className:"img-fluid chat-list-miniature",id:"fotoGrupo",alt:"logo"})}),Object(ce.jsx)("div",{className:"col-8",onClick:function(){return e.setFriendConversation(t)},children:t.nickname}),Object(ce.jsx)("div",{className:"col-2",onClick:function(){return e.removeContact(t.id)},children:Object(ce.jsx)("i",{className:"fa fa-user-times"})})]})},t.id)}));return Object(ce.jsx)("div",{className:"d-flex scroll-contacts-list",children:Object(ce.jsx)("ul",{className:"list-group",children:a})})}var Ee=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={isNewContactModalOpen:!1,isNewGroupModalOpen:!1},s.toggleNewContactModal=s.toggleNewContactModal.bind(Object(ue.a)(s)),s.toggleNewGroupModal=s.toggleNewGroupModal.bind(Object(ue.a)(s)),s.removeContact=s.removeContact.bind(Object(ue.a)(s)),s.setFriendConversation=s.setFriendConversation.bind(Object(ue.a)(s)),s}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.getContacts(this.props.auth.user.id),this.props.getConversations(this.props.auth.user.id)}},{key:"toggleNewContactModal",value:function(){var e=this.props.auth.user.id;this.props.contacts.contacts.map((function(t){e+="-"+t.id})),this.props.getUsers(e),this.setState({isNewContactModalOpen:!this.state.isNewContactModalOpen})}},{key:"toggleNewGroupModal",value:function(){this.setState({isNewGroupModalOpen:!this.state.isNewGroupModalOpen})}},{key:"removeContact",value:function(e){var t={id_user:this.props.auth.user.id,id_contact:e};this.props.removeContact(t)}},{key:"setFriendConversation",value:function(e){var t=this,a=e.id;if(0===this.props.conversations.conversations.length){var s={senderId:this.props.auth.user.id,receiverId:a};this.props.createNewConversation(s),this.props.setCurrentFriendConversation(e)}else{var n=!1;if(this.props.conversations.conversations.map((function(a){a.members.includes(t.props.auth.user.id)&&a.members.includes(e.id)&&(t.props.setCurrentConversation(a._id),t.props.setCurrentFriendConversation(e),n=!0)})),!n){var c={senderId:this.props.auth.user.id,receiverId:a};this.props.createNewConversation(c),this.props.setCurrentFriendConversation(e)}}}},{key:"render",value:function(){return Object(ce.jsxs)(n.a.Fragment,{children:[Object(ce.jsx)(Me,{isModalOpen:this.state.isNewContactModalOpen,toggleModal:this.toggleNewContactModal,users:this.props.users}),Object(ce.jsx)("div",{className:"row",children:Object(ce.jsxs)("div",{className:"card border-0",children:[Object(ce.jsx)("div",{className:"card-header",children:Object(ce.jsx)("div",{className:"row",children:Object(ce.jsx)("div",{className:"col-12 text-center",onClick:this.toggleNewContactModal,children:Object(ce.jsxs)("span",{className:"fa-stack fa-2x",children:[Object(ce.jsx)("i",{className:"fa fa-circle fa-button fa-stack-2x"}),Object(ce.jsx)("i",{className:"fa fa-user-plus fa-stack-1x fa-inverse"})]})})})}),Object(ce.jsx)("div",{className:"card-body extra",children:Object(ce.jsxs)("div",{className:"card",children:[Object(ce.jsx)("div",{className:"card-header text-center",children:"Chats"}),Object(ce.jsx)("div",{className:"card-body",children:Object(ce.jsx)(Pe,{contacts:this.props.contacts,removeContact:this.removeContact,setFriendConversation:this.setFriendConversation})})]})})]})})]})}}]),a}(s.Component),Ae=Object(ae.b)((function(e){return{auth:e.auth,errors:e.errors,contacts:e.contacts,users:e.users,conversations:e.conversations}}),{getContacts:T,getUsers:L,removeContact:function(e){return function(t){t(D()),m.a.patch(F+"/api/users/remove-contact",e).then((function(e){return e.data.user_id})).then((function(e){return t(T(e))})).catch((function(e){return t({type:O,payload:e.response.data})}))}},createNewConversation:function(e){return function(t){m.a.post(F+"/api/conversations/new-conversation",e).then((function(e){t(V(e.data.savedConversation._id)),t(B(e.data.conversations))})).catch((function(e){return t({type:O,payload:e.response.data})}))}},getConversations:z,setCurrentConversation:function(e){return{type:P,payload:e}},getMessagesConversation:K,setCurrentFriendConversation:function(e){return{type:M,payload:e}}})(Object(j.g)(Ee));var Ue=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(q.a)({},t.target.id,t.target.value))},e.state={old_password:"",password:"",password2:"",hasChanged:!1,errors:!1},e.changePassword=e.changePassword.bind(Object(ue.a)(e)),e}return Object(o.a)(a,[{key:"componentWillReceiveProps",value:function(e){if(0!==Object.keys(e.errors).length){var t=(a=e.errors).old_password?a.old_password:a.password?a.password:a.password2?a.password2:a.emailnotfound?a.emailnotfound:void 0;ne()("Error!",t,"error"),this.props.cleanErrors(),this.setState({hasChanged:!1,errors:!0})}var a}},{key:"componentDidUpdate",value:function(){this.state.hasChanged&&!this.state.errors&&(ne()("Success!","Your password has changed","success"),this.props.toggleModal(),this.setState({hasChanged:!1,errors:!1}))}},{key:"changePassword",value:function(){var e={id:this.props.auth.user.id,old_password:this.state.old_password,password:this.state.password,password2:this.state.password2};this.props.changePassword(e),this.setState({hasChanged:!0})}},{key:"render",value:function(){return Object(ce.jsxs)(pe.a,{isOpen:this.props.isModalOpen,toggle:this.props.toggleModal,children:[Object(ce.jsx)(me.a,{className:"modal-header",children:"Change Password"}),Object(ce.jsx)(be.a,{className:"modal-body",children:Object(ce.jsx)(X.a,{className:"login100-form",noValidate:!0,children:Object(ce.jsx)(Q.a,{className:"form-group",children:Object(ce.jsxs)($.a,{md:12,className:"wrap-input100",children:[Object(ce.jsxs)(oe.a,{children:[Object(ce.jsx)(Z.a,{children:"Old Password"}),Object(ce.jsx)(ee.a,{type:"password",id:"old_password",placeholder:"",className:"input100",onChange:this.onChange}),Object(ce.jsx)("span",{className:"focus-input100"})]}),Object(ce.jsxs)(oe.a,{className:"mt-4",children:[Object(ce.jsx)(Z.a,{children:"New Password"}),Object(ce.jsx)(ee.a,{type:"password",id:"password",placeholder:"",className:"input100",onChange:this.onChange}),Object(ce.jsx)("span",{className:"focus-input100"})]}),Object(ce.jsxs)(oe.a,{className:"mt-4",children:[Object(ce.jsx)(Z.a,{children:"Confirm New Password"}),Object(ce.jsx)(ee.a,{type:"password",id:"password2",placeholder:"",className:"input100",onChange:this.onChange}),Object(ce.jsx)("span",{className:"focus-input100"})]})]})})})}),Object(ce.jsxs)(Oe.a,{children:[Object(ce.jsx)(te.a,{color:"primary",onClick:this.changePassword,children:"Change Password"}),Object(ce.jsx)(te.a,{color:"secondary",onClick:this.props.toggleModal,children:"Cancel"})]})]})}}]),a}(s.Component),Ie=Object(ae.b)((function(e){return{auth:e.auth,errors:e.errors}}),{changePassword:function(e){return function(t){m.a.patch(F+"/api/users/change-password",e).then((function(){t({type:v})})).catch((function(e){return t({type:O,payload:e.response.data})}))}},cleanErrors:Y})(Object(j.g)(Ue)),Fe=a(26),Te=a(25),Re=a(111),De=a(242),Le=function(){var e=Object(s.useState)(new Date),t=Object(Fe.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(new Date),r=Object(Fe.a)(c,2),i=r[0],o=r[1];return Object(ce.jsx)("div",{className:"container-fluid g-lg-2",children:Object(ce.jsx)(Te.a,{utils:Re.a,children:Object(ce.jsxs)("div",{className:"row g-2",children:[Object(ce.jsx)("label",{class:"reloj",children:"Since"}),Object(ce.jsx)("div",{className:"col-md-12",children:Object(ce.jsx)(De.a,{value:a,onChange:n})}),Object(ce.jsx)("label",{class:"reloj",children:"Until"}),Object(ce.jsx)("div",{className:"col-md-12",children:Object(ce.jsx)(De.a,{value:i,onChange:o})})]})})})},Ge=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={isPasswordModalOpen:!1},s.togglePasswordModal=s.togglePasswordModal.bind(Object(ue.a)(s)),s}return Object(o.a)(a,[{key:"togglePasswordModal",value:function(){this.setState({isPasswordModalOpen:!this.state.isPasswordModalOpen})}},{key:"render",value:function(){return Object(ce.jsxs)("div",{className:"container scroll-modal",children:[Object(ce.jsx)(Ie,{isModalOpen:this.state.isPasswordModalOpen,toggleModal:this.togglePasswordModal}),Object(ce.jsxs)("div",{className:"row robot-container",children:[Object(ce.jsxs)("div",{className:"col-md-12 col-12 mt-5 text-center",children:[Object(ce.jsx)("h2",{className:"TitlePass",children:"ROBOT"}),Object(ce.jsx)("br",{}),Object(ce.jsx)("div",{className:"mt-4",children:Object(ce.jsx)(Le,{})}),Object(ce.jsx)("br",{}),Object(ce.jsx)("textarea",{className:"form-control"}),Object(ce.jsxs)("div",{className:"form-check mt-2 text-left",children:[Object(ce.jsx)("input",{type:"checkbox",className:"form-check-input",readOnly:!0}),Object(ce.jsx)("label",{className:"form-check-label",children:"Automatic Answer"})]}),Object(ce.jsx)("br",{}),Object(ce.jsx)("p",{children:"Available soon!"}),Object(ce.jsx)("hr",{})]}),Object(ce.jsx)("div",{className:"col-md-12 col-12 mt-5 text-center",children:Object(ce.jsxs)("span",{className:"fa-stack fa-2x",onClick:this.togglePasswordModal,children:[Object(ce.jsx)("i",{className:"fa fa-circle fa-button fa-stack-2x"}),Object(ce.jsx)("i",{className:"fa fa-user-secret fa-stack-1x fa-inverse"})]})})]})]})}}]),a}(s.Component),Ve=(a(197),function(e){var t=e.setMedia,a=e.setLoading,n=Object(s.useState)(null),c=Object(Fe.a)(n,2),r=c[0],i=c[1],o=Object(s.useState)(""),l=Object(Fe.a)(o,2),d=l[0],u=l[1],j=Object(s.useState)("drag__image"),h=Object(Fe.a)(j,2),p=h[0],m=h[1],b=Object(s.useState)(null),O=Object(Fe.a)(b,2),f=O[0],g=O[1],x=Object(s.useState)(null),v=Object(Fe.a)(x,2),N=v[0],C=v[1],w=["image/png","image/jpeg","image/jpg"],y=Object(s.useRef)(null),k=function(e){return e&&w.includes(e.type)?(i(!1),!0):(i(!0),u("File is incorrect"),g(""),!1)},S=function(e){var a=new FileReader;a.readAsDataURL(e),a.addEventListener("load",(function(e){g(e.target.result)})),C(e),t(e)};return Object(s.useEffect)((function(){setTimeout((function(){i(!1)}),5e3)}),[r]),Object(ce.jsxs)("div",{className:"drag",children:[Object(ce.jsx)("h2",{className:"drag__title",children:"Upload your image"}),Object(ce.jsx)("div",{className:"drag__info",children:"File shoul be JPEG or PNG"}),r&&Object(ce.jsx)("div",{className:"drag__message",children:d}),Object(ce.jsx)("input",{type:"file",name:"file",ref:y,onChange:function(e){var t=e.target.files[0];k(t)?S(t):C(null),S(t)}}),Object(ce.jsxs)("div",{className:p,onDragOver:function(e){e.preventDefault(),m("drag__image active")},onDragLeave:function(e){e.preventDefault(),m("drag__image")},onClick:function(){y.current.click()},onDrop:function(e){e.preventDefault(),y.current.files=e.dataTransfer.files;var t=y.current.files[0];if(!k(t))return i(!0),u("File is incorrect"),!1;S(t),S(t)},children:[Object(ce.jsx)("img",{src:f,alt:"",className:"graf__image--preview"}),Object(ce.jsx)("span",{className:"drag__image--message",children:"Click or Drag & Drop your image here."})]}),Object(ce.jsx)("button",{className:"drag__action",onClick:function(){k(N)&&N?a(!0):(i(!0),u("First, upload an image"))},children:"Save image"})]})}),ze=a(241),Be=a(73),Ke=a.n(Be),We=a(109),He=a(56);a(206),a(207);He.a.initializeApp({apiKey:"AIzaSyCz452laVh_CFOSsL94Xnq8fV05fvVsH1Y",authDomain:"slider-react-ea3d9.firebaseapp.com",projectId:"slider-react-ea3d9",storageBucket:"slider-react-ea3d9.appspot.com",messagingSenderId:"606699125537",appId:"1:606699125537:web:b8bac4ef7989f94ea35c60"});var Je=He.a.storage(),Ye=He.a.firestore(),qe=He.a.firestore.FieldValue.serverTimestamp,Xe=function(e){var t=Object(s.useState)(0),a=Object(Fe.a)(t,2),n=a[0],c=a[1],r=Object(s.useState)(null),i=Object(Fe.a)(r,2),o=i[0],l=i[1],d=Object(s.useState)(null),u=Object(Fe.a)(d,2),j=u[0],h=u[1];return Object(s.useEffect)((function(){var t=Je.ref(e.name),a=Ye.collection("images");t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;c(t)}),(function(e){l(e)}),Object(We.a)(Ke.a.mark((function e(){var s,n;return Ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:s=e.sent,n=qe(),a.add({url:s,createdAt:n}),h(s);case 6:case"end":return e.stop()}}),e)}))))}),[e]),{progress:n,url:j,error:o}},Qe=(a(199),function(e){var t=e.file,a=e.setFile,n=e.setLoading,c=e.setUrl,r=Xe(t),i=r.url,o=r.progress;return Object(s.useEffect)((function(){i&&(a(null),n(!1),c(i))}),[i,a,n,c]),Object(ce.jsxs)("div",{className:"loader",children:[Object(ce.jsx)("h3",{className:"loader__title",children:" Uploading... "}),Object(ce.jsx)("div",{className:"loader__progress",children:Object(ce.jsx)(ze.a.div,{initial:{width:0},animate:{width:o+"%"},className:"loader__progress--bar"})})]})}),Ze=function(e){var t=Object(s.useState)(!1),a=Object(Fe.a)(t,2),n=a[0],c=a[1],r=Object(s.useState)(null),i=Object(Fe.a)(r,2),o=i[0],l=i[1],d=Object(s.useState)(null),u=Object(Fe.a)(d,2),j=u[0],h=u[1];return Object(s.useEffect)((function(){j&&e.setUrl(j)}),[j]),Object(ce.jsx)("section",{className:"uploader",children:n?Object(ce.jsx)(Qe,{file:o,setFile:l,setUrl:h,setLoading:c}):Object(ce.jsx)(Ve,{setMedia:l,setLoading:c})})};function $e(e){return console.log("in"),Object(ce.jsx)("img",{src:""!==e.image?e.image:"images/profile_dummy.png",className:"miniature-profile-image",alt:"profile img"})}var et=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).setUrl=function(t){e.setState({url:t})},e.handleName=function(t){e.setState({name:t.target.value})},e.handleLastName=function(t){e.setState({lastname:t.target.value})},e.handleNickName=function(t){e.setState({nickname:t.target.value})},e.handlePhone=function(t){e.setState({phone:t.target.value})},e.handleGithub=function(t){e.setState({github:t.target.value})},e.handleInstagram=function(t){e.setState({instagram:t.target.value})},e.handleTwitter=function(t){e.setState({twitter:t.target.value})},e.handleLinkeding=function(t){e.setState({linkedin:t.target.value})},e.state={name:"",lastname:"",nickname:"",phone:"",github:"",instagram:"",twitter:"",linkedin:"",url:"",errors:{},isChangingImage:!1},e.updateUser=e.updateUser.bind(Object(ue.a)(e)),e.setUrl=e.setUrl.bind(Object(ue.a)(e)),e.changeProfileImage=e.changeProfileImage.bind(Object(ue.a)(e)),e}return Object(o.a)(a,[{key:"updateUser",value:function(){for(var e={id_user:this.props.auth.user.id,name:this.state.name,lastname:this.state.lastname,nickname:this.state.nickname,phone:this.state.phone,image:this.state.url,github:this.state.github,instagram:this.state.instagram,twitter:this.state.twitter,linkedin:this.state.linkedin},t=Object.keys(e),a=0;a<t.length;a++)""===e[t[a]]&&(e[t[a]]=this.props.auth.user[t[a]]);this.props.updateUser(e),this.props.toggleModal()}},{key:"changeProfileImage",value:function(){this.setState({isChangingImage:!this.state.isChangingImage})}},{key:"componentDidUpdate",value:function(){""!==this.state.url&&(this.props.changeImage({url:this.state.url,user_id:this.props.auth.user.id}),this.setState({url:""}))}},{key:"render",value:function(){return Object(ce.jsxs)(pe.a,{isOpen:this.props.isModalOpen,toggle:this.props.toggleModal,size:"lg",children:[Object(ce.jsx)(me.a,{children:"Configuration"}),Object(ce.jsx)(be.a,{children:Object(ce.jsx)("div",{className:"container-fluid",children:Object(ce.jsxs)("div",{className:"row",children:[Object(ce.jsx)("div",{className:"col-md-5 col-12 mb-md-1",children:Object(ce.jsx)(Ge,{})}),Object(ce.jsxs)("div",{className:"col-md-7 col-12 mt-1 mr-4",children:[Object(ce.jsxs)("div",{className:"row justify-content-center",children:[!0===this.state.isChangingImage?Object(ce.jsx)(Ze,{setUrl:this.setUrl}):Object(ce.jsx)($e,{image:this.props.auth.user.image}),Object(ce.jsx)("hr",{}),Object(ce.jsxs)("span",{className:"fa-stack fa-2x mb-4",onClick:this.changeProfileImage,children:[Object(ce.jsx)("i",{className:"fa fa-circle fa-button fa-stack-2x"}),Object(ce.jsx)("i",{className:"fa fa-id-badge fa-stack-1x fa-inverse"})]})]}),Object(ce.jsx)("div",{className:"row scroll-update-profile-modal justify-content-center",children:Object(ce.jsx)(X.a,{className:"login100-form",noValidate:!0,onSubmit:this.onSubmit,children:Object(ce.jsxs)(Q.a,{className:"form-group text-center",children:[Object(ce.jsxs)($.a,{md:12,className:"wrap-input100",children:[Object(ce.jsx)(ee.a,{id:"name",type:"text",name:"name",placeholder:this.props.auth.user.name,className:"input100",value:this.state.name,onChange:this.handleName}),Object(ce.jsx)("span",{className:"focus-input100"}),Object(ce.jsx)("span",{className:"symbol-input100",children:Object(ce.jsx)("i",{className:"fa fa-user"})})]}),Object(ce.jsxs)($.a,{md:12,className:"wrap-input100",children:[Object(ce.jsx)(ee.a,{id:"lastname",placeholder:this.props.auth.user.lastname,className:"input100",onChange:this.handleLastName,value:this.state.lastname}),Object(ce.jsx)("span",{className:"focus-input100"}),Object(ce.jsx)("span",{className:"symbol-input100",children:Object(ce.jsx)("i",{className:"fa fa-user"})})]}),Object(ce.jsxs)($.a,{md:12,className:"wrap-input100",children:[Object(ce.jsx)(ee.a,{id:"nickname",type:"text",placeholder:this.props.auth.user.nickname,className:"input100",value:this.state.nickname,onChange:this.handleNickName}),Object(ce.jsx)("span",{className:"focus-input100"}),Object(ce.jsx)("span",{className:"symbol-input100",children:Object(ce.jsx)("i",{className:"fa fa-user"})})]}),Object(ce.jsxs)($.a,{md:12,className:"wrap-input100",children:[Object(ce.jsx)(ee.a,{id:"phone",placeholder:this.props.auth.user.phone,className:"input100",onChange:this.handlePhone,value:this.state.phone}),Object(ce.jsx)("span",{className:"focus-input100"}),Object(ce.jsx)("span",{className:"symbol-input100",children:Object(ce.jsx)("i",{className:"fa fa-phone"})})]}),Object(ce.jsxs)($.a,{md:12,className:"wrap-input100",children:[Object(ce.jsx)(ee.a,{id:"github",placeholder:this.props.auth.user.github,className:"input100",onChange:this.handleGithub,value:this.state.github}),Object(ce.jsx)("span",{className:"focus-input100"}),Object(ce.jsx)("span",{className:"symbol-input100",children:Object(ce.jsx)("i",{className:"fa fa-github"})})]}),Object(ce.jsxs)($.a,{md:12,className:"wrap-input100",children:[Object(ce.jsx)(ee.a,{id:"instagram",placeholder:this.props.auth.user.instagram,className:"input100",onChange:this.handleInstagram,value:this.state.instagram}),Object(ce.jsx)("span",{className:"focus-input100"}),Object(ce.jsx)("span",{className:"symbol-input100",children:Object(ce.jsx)("i",{className:"fa fa-instagram"})})]}),Object(ce.jsxs)($.a,{md:12,className:"wrap-input100",children:[Object(ce.jsx)(ee.a,{id:"twitter",placeholder:this.props.auth.user.twitter,className:"input100",onChange:this.handleTwitter,value:this.state.twitter}),Object(ce.jsx)("span",{className:"focus-input100"}),Object(ce.jsx)("span",{className:"symbol-input100",children:Object(ce.jsx)("i",{className:"fa fa-twitter"})})]}),Object(ce.jsxs)($.a,{md:12,className:"wrap-input100",children:[Object(ce.jsx)(ee.a,{id:"linkedin",placeholder:this.props.auth.user.linkedin,className:"input100",onChange:this.handleLinkeding,value:this.state.linkedin}),Object(ce.jsx)("span",{className:"focus-input100"}),Object(ce.jsx)("span",{className:"symbol-input100",children:Object(ce.jsx)("i",{className:"fa fa-linkedin"})})]})]})})})]})]})})}),Object(ce.jsxs)(Oe.a,{children:[Object(ce.jsx)(te.a,{color:"primary",onClick:this.updateUser,children:"Update"})," ",Object(ce.jsx)(te.a,{color:"secondary",onClick:this.props.toggleModal,children:"Cancel"})]})]})}}]),a}(s.Component),tt=Object(ae.b)((function(e){return{auth:e.auth,errors:e.errors}}),{updateUser:function(e){return function(t){m.a.post(F+"/api/users/update-user",e).then((function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),b(a);var s=Object(h.a)(a);t(H(s))})).catch((function(e){return t({type:O,payload:e.response.data})}))}},changeImage:function(e){return function(t){m.a.patch(F+"/api/users/add-image",e).then((function(e){t({type:x,payload:e.data})})).catch((function(e){return t({type:O,payload:e.response.data})}))}}})(Object(j.g)(et));var at=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={isConfigurationModalOpen:!1},s.toggleConfigurationtModal=s.toggleConfigurationtModal.bind(Object(ue.a)(s)),s}return Object(o.a)(a,[{key:"toggleConfigurationtModal",value:function(){this.setState({isConfigurationModalOpen:!this.state.isConfigurationModalOpen})}},{key:"render",value:function(){return Object(ce.jsxs)("div",{className:"container",children:[Object(ce.jsx)(tt,{isModalOpen:this.state.isConfigurationModalOpen,toggleModal:this.toggleConfigurationtModal}),Object(ce.jsx)("div",{className:"row justify-content-center mt-4",children:Object(ce.jsx)("img",{src:""!==this.props.user.image?this.props.user.image:"images/profile_dummy.png",className:"miniature-profile-image",alt:"profile img"})}),Object(ce.jsx)("div",{className:"row justify-content-center mt-4 nickname-title",children:(e=this.props.user.nickname,e.charAt(0).toUpperCase()+e.slice(1))}),Object(ce.jsx)("div",{className:"row justify-content-center",children:Object(ce.jsxs)("span",{className:"fa-stack fa-2x",onClick:this.toggleConfigurationtModal,children:[Object(ce.jsx)("i",{className:"fa fa-circle fa-button fa-stack-2x"}),Object(ce.jsx)("i",{className:"fa fa-cogs fa-stack-1x fa-inverse"})]})})]});var e}}]),a}(s.Component),st=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={errors:{}},e}return Object(o.a)(a,[{key:"render",value:function(){return Object(ce.jsxs)("div",{className:"row app-container",children:[Object(ce.jsxs)("div",{className:"col-3",children:[Object(ce.jsx)("div",{className:"row",children:Object(ce.jsx)("div",{className:"miniature-profile-summary",children:Object(ce.jsx)(at,{user:this.props.auth.user})})}),Object(ce.jsx)("div",{className:"border mt-4",children:Object(ce.jsx)(Ae,{})})]}),Object(ce.jsx)("div",{className:"col-9",children:Object(ce.jsx)(ye,{})})]})}}]),a}(s.Component),nt=Object(ae.b)((function(e){return{auth:e.auth,errors:e.errors}}))(Object(j.g)(st)),ct=a(19),rt=a(113),it=["component","auth"],ot=Object(ae.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,s=Object(rt.a)(e,it);return Object(ce.jsx)(j.b,Object(ct.a)(Object(ct.a)({},s),{},{render:function(e){return!0===a.isAuthenticated?Object(ce.jsx)(t,Object(ct.a)({},e)):Object(ce.jsx)(j.a,{to:"/sign-in"})}}))}));function lt(e){return e.isAuthenticated?Object(ce.jsx)("li",{className:"nav-item",children:Object(ce.jsx)(u.b,{className:"nav-link",to:"/sign-in",onClick:e.logOut,children:"Sign Out"})}):Object(ce.jsxs)(n.a.Fragment,{children:[Object(ce.jsx)("li",{className:"nav-item",children:Object(ce.jsx)(u.b,{className:"nav-link",to:"/sign-in",children:"Sign in"})}),Object(ce.jsx)("li",{className:"nav-item",children:Object(ce.jsx)(u.b,{className:"nav-link",to:"/sign-up",children:"Sign up"})})]})}var dt=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).onLogoutClick=function(t){t.preventDefault(),e.props.logoutUser()},e}return Object(o.a)(a,[{key:"render",value:function(){return Object(ce.jsx)("div",{className:"Header",children:Object(ce.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light fixed-top",children:Object(ce.jsxs)("div",{className:"container",children:[Object(ce.jsx)(u.b,{className:"navbar-brand",to:"/",children:"Chatting App"}),Object(ce.jsx)("ul",{className:"navbar-nav",children:Object(ce.jsx)(lt,{isAuthenticated:this.props.auth.isAuthenticated,logOut:this.props.logoutUser})})]})})})}}]),a}(s.Component),ut=Object(ae.b)((function(e){return{auth:e.auth,errors:e.errors}}),{logoutUser:J})(Object(j.g)(dt)),jt=(a(200),a(201),a(51)),ht=a(110),pt=(a(202),a(203)),mt={isAuthenticated:!1,user:{},loading:!1},bt={},Ot={contacts:[],isLoading:!1},ft=[],gt={currentConversation:null,currentConversationFriend:null,conversations:[]},xt=Object(jt.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(ct.a)(Object(ct.a)({},e),{},{isAuthenticated:!pt(t.payload),user:t.payload});case g:return Object(ct.a)(Object(ct.a)({},e),{},{loading:!0});case v:default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return t.payload;case f:return{};default:return e}},contacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return{contacts:t.payload,isLoading:!1};case w:return{contacts:[],isLoading:!0};case C:return{contacts:[],isLoading:!1};default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return t.payload;case k:return[];default:return e}},conversations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:case P:return Object(ct.a)(Object(ct.a)({},e),{},{currentConversation:t.payload});case _:return Object(ct.a)(Object(ct.a)({},e),{},{conversations:t.payload});case M:return Object(ct.a)(Object(ct.a)({},e),{},{currentConversationFriend:t.payload});case E:return{currentConversation:null,currentConversationFriend:null,conversations:[]};default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(ct.a)(Object(ct.a)({},e),{},{messages:t.payload});case U:return Object(ct.a)(Object(ct.a)({},e),{},{messages:e.messages.concat(t.payload)});case I:return{};default:return e}}}),vt=[ht.a],Nt=Object(jt.d)(xt,{},Object(jt.c)(jt.a.apply(void 0,vt)));if(localStorage.jwtToken){var Ct=localStorage.jwtToken;b(Ct);var wt=Object(h.a)(Ct);Nt.dispatch(H(wt));var yt=Date.now()/1e3;wt.exp<yt&&(Nt.dispatch(J()),window.location.href="./sign-in")}var kt=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(ce.jsx)(ae.a,{store:Nt,children:Object(ce.jsx)(u.a,{children:Object(ce.jsxs)("div",{className:"App",children:[Object(ce.jsx)(ut,{}),Object(ce.jsx)(j.b,{exact:!0,path:"/",component:de}),Object(ce.jsx)(j.b,{exact:!0,path:"/sign-up",component:ie}),Object(ce.jsx)(j.b,{path:"/sign-in",component:de}),Object(ce.jsx)(j.d,{children:Object(ce.jsx)(ot,{exact:!0,path:"/app",component:nt})})]})})})}}]),a}(s.Component);a(204);r.a.render(Object(ce.jsx)(n.a.StrictMode,{children:Object(ce.jsx)(kt,{})}),document.getElementById("root"))}},[[205,1,2]]]);
//# sourceMappingURL=main.c5bf92ce.chunk.js.map